# Dataset Variable Explorer


```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Load necessary libraries
library(reactable)
library(readxl)
library(dplyr)
library(htmltools)
library(purrr)
library(writexl)

# Load the dataset
metadata <- read_excel("tables/Dataset_variable_lists.xlsx")

# Render reactable with main columns and expandable rows
reactable(
  metadata %>% select(`Variable name`, `Description - SWE`, `Description - ENG`), # Main columns
  filterable = TRUE,                                  # Enable column filtering
  searchable = TRUE,                                  # Enable global search
  pagination = TRUE,                                  # Enable pagination
  defaultPageSize = 20,                               # Show 20 rows per page
  highlight = TRUE,                                   # Highlight rows on hover
  bordered = TRUE,                                    # Add borders for a clear structure
  striped = TRUE,                                     # Alternating row colors for readability
  columns = list(
    `Variable name` = colDef(name = "Variable Name"),  
    `Description - SWE` = colDef(name = "Description (SWE)"),
    `Description - ENG` = colDef(name = "Description (ENG)")
  ),
  # Set up expandable row details for additional variables including a clickable URL
  details = function(index) {
    row_data <- metadata[index, ]
    htmltools::tags$div(
      style = "padding: 10px;",
      htmltools::tags$strong("Location: "), row_data$Location, htmltools::tags$br(),
      htmltools::tags$strong("Source: "), row_data$Source, htmltools::tags$br(),
      htmltools::tags$strong("Dataset description: "), row_data$`Dataset description`, htmltools::tags$br(),
      htmltools::tags$strong("Observations in Dataset: "), row_data$`Observations in Dataset`, htmltools::tags$br(),
      htmltools::tags$strong("Delivery file: "), row_data$`Delivery file`, htmltools::tags$br(),
      htmltools::tags$strong("External link: "), htmltools::tags$a(href = row_data$Link, target = "_blank", row_data$Link)  # Display URL as clickable link
    )
  }
)
```

